{% extends 'base.html' %}

{% load bootstrap3 staticfiles %}

{% block title %}Projects{% endblock %}

{% block content %}
    <h1>
        {{ project.value.title }}
        <small>
            <a href="{% url 'ids_projects:project-edit' project_uuid=project.uuid %}" class="btn btn-sm btn-link">Edit</a>
        </small>
    </h1>
    <p><b>Investigation Type: </b> {{ project.value.investigation_type }}</p>
    <p><b>Description: </b> {{ project.value.description }}</p>
    <p><b>Creator: </b>{{ project.value.creator }}</p>

    <div class="row">
        <div class="col-sm-2">
        <a href="{% url 'ids_projects:data-type' %}?relationship=input&project_uuid={{project.uuid}}" class="btn btn-primary btn-block">Add Data</a>

        <a href="{% url 'ids_projects:specimen-create' %}?project_uuid={{project.uuid}}" class="btn btn-default btn-block">Define Specimen</a>

        {% for process_type in process_types %}
            <a href="{% url 'ids_projects:process-create' %}?project_uuid={{project.uuid}}&process_type={{process_type}}" class="btn btn-default btn-block">Define {{ process_type|title }}</a>
        {% endfor %}

        </div>
        <div class="col-sm-10">
            <div class="jumbotron">
                TODO: Show project data, files, metadata, structure here.
            </div>

            <ul>
            {% for assoc in project.associations_to_me %}
                {% with assoc.name|slice:"6:" as name %}
                {% with 'ids_projects:'|add:name|add:'-view' as route %}
                {% with name|add:'_uuid='|add:assoc.uuid as param %}

                <li>
                    <a href="{% url route assoc.uuid %}">
                        <b>{{ name }}</b>: {{ assoc.title }}
                    </a>
                </li>

                {% endwith %}
                {% endwith %}
                {% endwith %}
            {% endfor %}
            </ul>
        </div>
    </div>


{% endblock %}
